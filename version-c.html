<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Comprar pack ‚Äì Mochileros</title>
  <link rel="stylesheet" href="style/style.css">
</head>
<body class="single">
<header class="site-header compact">
  <div class="brand">
    <h1 style="font-size:5.2rem;line-height:1;margin:0">Mochileros Sin Fronteras</h1>
  </div>

  <nav aria-label="Principal" class="nav">
    <ul>
      <li><a href="index.html" class="active">Inicio</a></li>
      <li><a href="#">Experiencias</a></li>
      <li><a href="#">Consejos</a></li>
      <li><a href="#">Foro</a></li>
      <li><a href="#">Contacto</a></li>
    </ul>
  </nav>

    <div class="header-right">
    <img src="images/logo.jpeg" alt="Logo" class="mini-logo-right" aria-hidden="true">
    <div class="lang-block">
      <label for="lang" class="sr-only">Idioma</label>
      <select id="lang" style="font-size:2.2rem;padding:.45rem .7rem">
        <option>ES</option>
        <option>EN</option>
      </select>
    </div>
  </div>

  <!-- Enlace centrado debajo del nav y encima del contenido -->
  </header>

  <!-- Enlace fuera del header, centrado (posici√≥n se√±alada por el usuario) -->
  <div class="back-home">
    <a href="index.html">‚Üê Volver a Home</a>
  </div>

<h1>Compra de pack</h1>

<main class="two-cols">
  <div class="left-col">
    <section class="product">
      <div class="media">
        <img src="images/pack_andes.jpeg" alt="Pack Andes" class="product-image">
        <!-- Barra superior con t√≠tulo y precio -->
        <div class="title-bar">
          <span id="pack-title">Andes esenciales (10 d√≠as)</span>
          <span class="price-badge" id="pack-price">‚Ç¨489</span>
        </div>
        <!-- Tarjeta breve dentro de la imagen -->
        <div class="brief" id="pack-brief">Cusco, Valle Sagrado y Lago Titicaca. Transporte local y hostales.</div>
      </div>
    </section>

    <!-- Recuadro independiente para la descripci√≥n larga -->
    <section class="product-desc" aria-labelledby="desc-title">
      <h3 class="section-label" id="desc-title">Descripci√≥n del pack</h3>
  <p id="pack-desc">Este pack est√° pensado para viajeros que buscan combinar naturaleza, cultura y un ritmo de viaje relajado. A lo largo del recorrido visitar√°s los puntos m√°s emblem√°ticos de la regi√≥n, con tiempo para disfrutar de los paisajes y realizar peque√±as rutas a pie. El alojamiento es en hostales y casas locales cuidadosamente seleccionadas, y el transporte se realiza en medios p√∫blicos o privados seg√∫n el tramo para optimizar tiempos. Incluye recomendaciones de comida t√≠pica, paradas panor√°micas y sugerencias de actividades opcionales para que puedas personalizar cada d√≠a sin complicaciones.</p>
    </section>
  </div>

  <section class="checkout">
    <form class="form-card checkout-form" action="#" method="post">
      <h3 class="form-title">Formulario de compra</h3>

      <div class="field">
        <label class="sr-only" for="n">Nombre completo</label>
        <input id="n" name="n" placeholder="Nombre completo" required>
      </div>

      <div class="field">
        <label class="sr-only" for="ce">Correo electr√≥nico</label>
        <input id="ce" name="ce" type="email" placeholder="Correo electr√≥nico" required>
      </div>

      <div class="field">
        <label for="tt">Tipo de tarjeta</label>
        <select id="tt" name="tt" required>
          <option>Visa</option>
          <option>Mastercard</option>
          <option>American Express</option>
        </select>
      </div>

      <div class="field">
        <label class="sr-only" for="num">N√∫mero de tarjeta</label>
        <input id="num" name="num" inputmode="numeric" pattern="[0-9 ]{12,19}" placeholder="N√∫mero de tarjeta" required>
      </div>

      <div class="field">
        <label class="sr-only" for="tit">Nombre del titular de la tarjeta</label>
        <input id="tit" name="tit" placeholder="Nombre del titular de la tarjeta" required>
      </div>

      <div class="row two">
        <label class="row-label" for="cad">Fecha de caducidad</label>
        <div class="field">
          <input id="cad" class="exp-input" name="cad" placeholder="MM/AA" inputmode="numeric" maxlength="5" pattern="^(0[1-9]|1[0-2])\/\d{2}$" required>
        </div>
        <button class="cal-btn" type="button" aria-label="Abrir calendario">üìÖ</button>
        <div class="field">
          <label class="sr-only" for="cvv">C√≥digo CVV</label>
          <input id="cvv" class="cvv-input" name="cvv" inputmode="numeric" pattern="[0-9]{3,4}" placeholder="C√≥digo CVV" required>
        </div>
      </div>

      <div class="row actions">
        <button class="btn" type="submit">Comprar</button>
        <button class="btn outline" type="reset">Borrar</button>
      </div>
    </form>
  </section>
</main>

<footer class="site-footer" style="font-size:2.2rem">
  <div class="footer-left">
    <small>¬© 2025 Mochileros Sin Fronteras</small>
  </div>

  <nav aria-label="Enlaces legales" class="footer-center">
    <a href="#">Sobre nosotros</a>
    <a href="#">Pol√≠tica de privacidad</a>
    <a href="#">Ayuda</a>
  </nav>

  <form class="newsletter" action="#" method="post">
    <label for="news-email">Suscr√≠bete a la newsletter</label>
    <input id="news-email" type="email" name="email" placeholder="tu@email.com" required>
    <button class="btn">Suscribirme</button>
  </form>

  <div class="footer-right">
    <a href="#" class="icon-link" aria-label="Instagram">
      <img src="images/icons/instagram.png" alt="Instagram">
    </a>
    <a href="#" class="icon-link" aria-label="TikTok">
      <img src="images/icons/tik-tok.png" alt="TikTok">
    </a>
    <a href="#" class="icon-link" aria-label="YouTube">
      <img src="images/icons/youtube.png" alt="YouTube">
    </a>
  </div>
</footer>
<script>
(function(){
  try {
    const params = new URLSearchParams(window.location.search);
    const img = params.get('img');
    const title = params.get('title');
    const price = params.get('price');
    const desc = params.get('desc');
  const product = document.querySelector('main.two-cols .product');
  const imgEl = product?.querySelector('img');
  const titleEl = document.getElementById('pack-title');
  const priceEl = document.getElementById('pack-price');
    const descEl = document.getElementById('pack-desc');
  const briefEl = document.getElementById('pack-brief');

    if (img && imgEl) imgEl.src = img;
    if (title && titleEl) {
      titleEl.textContent = title;
      if (imgEl) imgEl.alt = 'Pack ' + title;
    }
    if (price && priceEl) {
      const clean = String(price).replace(/[^0-9]/g,'');
      priceEl.textContent = (clean ? '‚Ç¨' + clean : price);
    }

    // Descripciones largas por pack como fallback si llega una corta
    const longByTitle = {
      'Andes esenciales (10 d√≠as)': 'Explora el coraz√≥n de los Andes con base en Cusco y el Valle Sagrado. Incluye caminatas por rutas cl√°sicas, visitas a comunidades locales y traves√≠a por el Lago Titicaca. Alojamiento en hostales sencillos, transporte interno y soporte de gu√≠as locales.',
      'Sahara en ruta (7 d√≠as)': 'Cruza el Alto Atlas hacia el desierto de Erg Chebbi. Dormir√°s en jaimas bajo un cielo estrellado, visitar√°s kasbahs hist√≥ricas como Ait Ben Hadu y recorrer√°s oasis y gargantas. Transporte con conductor local y vivac incluido.',
      'Himalaya f√°cil (8 d√≠as)': 'Ruta de iniciaci√≥n por Nepal con tiempo en Katmand√∫ y trekking suave hasta Poon Hill. Alojamientos en casas de t√©, ritmos tranquilos y paisajes de ochomiles al amanecer. Ideal para una primera experiencia en altura.'
    };

    if (briefEl && desc) briefEl.textContent = desc;
    if (descEl) {
      // Mantener el texto por defecto (lorem) salvo que tengamos una descripci√≥n larga
      if (title && longByTitle[title]) {
        descEl.textContent = longByTitle[title];
      } else if (desc) {
        descEl.textContent = desc;
      }
    }
  } catch (e) {}
})();

// M√°scara y validaci√≥n ligera para MM/AA en caducidad
(function(){
  try{
    const cad = document.getElementById('cad');
    if(!cad) return;
    cad.addEventListener('input', function(){
      let v = cad.value.replace(/[^0-9]/g,'');
      if (v.length > 4) v = v.slice(0,4);
      if (v.length >= 3) v = v.slice(0,2) + '/' + v.slice(2);
      cad.value = v;
    });
    cad.addEventListener('blur', function(){
      const m = cad.value.match(/^(\d{2})\/(\d{2})$/);
      if(!m) return;
      const mm = parseInt(m[1],10);
      if (mm < 1 || mm > 12) { cad.setCustomValidity('Mes inv√°lido (01-12)'); }
      else { cad.setCustomValidity(''); }
    });
  }catch(e){}
})();

// Popover de calendario (selector Mes/A√±o) para el bot√≥n üìÖ
(function(){
  function pad2(n){ return (n < 10 ? '0' : '') + n; }
  function yy2(year){ return String(year).slice(-2); }
  function parseMMYY(v){
    const m = (v||'').match(/^(\d{2})\/(\d{2})$/);
    if(!m) return null; return { mm: parseInt(m[1],10), yy: parseInt(m[2],10) };
  }

  const btn = document.querySelector('.checkout-form .cal-btn');
  const cadInput = document.getElementById('cad');
  if(!btn || !cadInput) return;

  let currentPopover = null;
  function close(){ if(currentPopover){ currentPopover.remove(); currentPopover = null; document.removeEventListener('click', onDoc); document.removeEventListener('keydown', onKey); } }
  function onDoc(ev){ if(currentPopover && !currentPopover.contains(ev.target) && ev.target !== btn){ close(); } }
  function onKey(ev){ if(ev.key === 'Escape'){ close(); } }

  btn.addEventListener('click', function(){
    try{
      if(currentPopover){ close(); return; }
      const pop = document.createElement('div');
      pop.className = 'exp-popover';
      const now = new Date();
      const parsed = parseMMYY(cadInput.value);
      const selMonth = parsed ? parsed.mm : (now.getMonth()+1);
      const selYearFull = now.getFullYear();
      const selYY = parsed ? parsed.yy : parseInt(yy2(selYearFull),10);

      // Meses 01..12
      const monthSel = document.createElement('select');
      monthSel.setAttribute('aria-label','Mes');
      for(let m=1;m<=12;m++){
        const opt = document.createElement('option');
        opt.value = pad2(m); opt.textContent = pad2(m);
        if(m === selMonth) opt.selected = true;
        monthSel.appendChild(opt);
      }

      // A√±os: desde a√±o actual hasta +15
      const yearSel = document.createElement('select');
      yearSel.setAttribute('aria-label','A√±o');
      const start = now.getFullYear();
      for(let y=start; y<= start+15; y++){
        const opt = document.createElement('option');
        opt.value = yy2(y); opt.textContent = y;
        if(parseInt(opt.value,10) === selYY) opt.selected = true;
        yearSel.appendChild(opt);
      }

      const applyBtn = document.createElement('button');
      applyBtn.type = 'button'; applyBtn.className = 'btn'; applyBtn.textContent = 'Aplicar';
      applyBtn.addEventListener('click', function(){
        cadInput.value = monthSel.value + '/' + yearSel.value;
        cadInput.setCustomValidity('');
        cadInput.dispatchEvent(new Event('input', {bubbles:true}));
        cadInput.focus();
        close();
      });

      const cancelBtn = document.createElement('button');
      cancelBtn.type = 'button'; cancelBtn.className = 'btn outline'; cancelBtn.textContent = 'Cancelar';
      cancelBtn.addEventListener('click', close);

      const row = document.createElement('div'); row.className = 'row'; row.style.gap = '.5rem';
      row.appendChild(monthSel); row.appendChild(yearSel);
      const btns = document.createElement('div'); btns.className = 'btns'; btns.appendChild(cancelBtn); btns.appendChild(applyBtn);
      pop.appendChild(row); pop.appendChild(btns);

      document.body.appendChild(pop);
      // Posicionar junto al bot√≥n
      const r = btn.getBoundingClientRect();
      const pw = 240, ph = 110; // aprox
      let left = r.left; let top = r.bottom + 8;
      if(left + pw > window.innerWidth - 8) left = window.innerWidth - pw - 8;
      if(top + ph > window.innerHeight - 8) top = r.top - ph - 8;
      pop.style.position = 'fixed';
      pop.style.left = left + 'px';
      pop.style.top = top + 'px';
      pop.style.width = pw + 'px';

      currentPopover = pop;
      setTimeout(()=>{ document.addEventListener('click', onDoc); document.addEventListener('keydown', onKey); }, 0);
    }catch(e){}
  });
})();
</script>
</body>
</html>






